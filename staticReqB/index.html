<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>请求页面</title>
    <style>
        #child {
            border: 2px solid greenyellow;
            width: 500px;
            height: 200px;
            margin: 0 auto;
            text-align: center;
        }

        #father {
            border: 2px solid darkturquoise;
            width: 500px;
            height: 200px;
            margin-bottom: 20px;
            text-align: center;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
</head>

<body>
    <div id="father">
        <p>这里登录入口</p>
        <input type="text" />
        <button>发送信息</button>
        <button>Login</button>
        <button>Logout</button>
        <button>popup</button>
        <p style="text-align: left;">message : <span></span></p>
    </div>
    <iframe id="child" src="https://sso-iframe-page.onrender.com"></iframe>
    <script>
        var input = document.getElementsByTagName('input')[0];
        var span = document.getElementsByTagName('span')[0];
        var btn1 = document.getElementsByTagName('button')[0];
        var btn2 = document.getElementsByTagName('button')[1];
        var btn3 = document.getElementsByTagName('button')[2];
        var btn4 = document.getElementsByTagName('button')[3];
        var frame = document.getElementById('child').contentWindow;
        /**
         * RequireJS全局配置文件
         */
        requirejs.config({
            waitSeconds: 20000,
            //预加载JS文件的配置项，默认可不用添加.js后缀
            paths:{
                //RequireJS默认假定所有的依赖资源都是JS脚本，因此无需再module ID上再加上js后缀。
                webpackNumbers:"https://sso-webpack-lib.onrender.com/index.bundle"
            }
        });

        requirejs(['webpackNumbers'],function(webpackNumbers){

            

            // ...
            // Global variable
            webpackNumbers.attachEvent(frame,'https://sso-iframe-page.onrender.com',span,btn4);
            // ...
            btn1.onclick = function () {
                var msg = input.value;
                // ...
                // Global variable
                webpackNumbers.sendMsg(frame,'https://sso-iframe-page.onrender.com',msg);
                // Property in the window object
                window.webpackNumbers.sendMsg(frame,'https://sso-iframe-page.onrender.com',msg);
                // ...
            }
            btn2.onclick = function () {
                // ...
                // Global variable
                webpackNumbers.login(frame,'https://sso-iframe-page.onrender.com');
                // Property in the window object
                window.webpackNumbers.login(frame,'https://sso-iframe-page.onrender.com');
                // ...
            }
            btn3.onclick = function () {
                // ...
                // Global variable
                webpackNumbers.logout(frame,'https://sso-iframe-page.onrender.com');
                // Property in the window object
                window.webpackNumbers.logout(frame,'https://sso-iframe-page.onrender.com');
                // ...
            }
            btn4.onclick = function () {
                window.open('https://sso-iframe-page.onrender.com',"","toolbar=no,status=no,menubar=no,location=center,scrollbars=no,resizable=no,height=500,width=657");
            }

        });

    </script>
</body>

</html>
